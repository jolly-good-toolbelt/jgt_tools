<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JGT Tools &mdash; jgt_tools - A collection of tools for commmon package scripts 0.5.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> jgt_tools - A collection of tools for commmon package scripts
          </a>
              <div class="version">
                0.5.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="jgt_tools.html">jgt_tools package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="jgt_tools.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="jgt_tools.docs.html">jgt_tools.docs package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="jgt_tools.docs.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="jgt_tools.docs.html#module-jgt_tools.docs.build_docs">jgt_tools.docs.build_docs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="jgt_tools.docs.html#module-jgt_tools.docs.sample_conf">jgt_tools.docs.sample_conf module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="jgt_tools.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="jgt_tools.html#module-jgt_tools.check_version">jgt_tools.check_version module</a></li>
<li class="toctree-l2"><a class="reference internal" href="jgt_tools.html#module-jgt_tools.env_setup">jgt_tools.env_setup module</a></li>
<li class="toctree-l2"><a class="reference internal" href="jgt_tools.html#module-jgt_tools.run_tests">jgt_tools.run_tests module</a></li>
<li class="toctree-l2"><a class="reference internal" href="jgt_tools.html#module-jgt_tools.self_check">jgt_tools.self_check module</a></li>
<li class="toctree-l2"><a class="reference internal" href="jgt_tools.html#module-jgt_tools.utils">jgt_tools.utils module</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MAINTAINER.html">Maintainer’s Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="MAINTAINER.html#cli-scripts">CLI scripts:</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">jgt_tools - A collection of tools for commmon package scripts</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>JGT Tools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="jgt-tools">
<h1>JGT Tools<a class="headerlink" href="#jgt-tools" title="Permalink to this headline">¶</a></h1>
<p>JGT Tools is a collection of package helpers
for common CLI functions
within a properly-formatted repository.</p>
<section id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h2>
<p>Just include <code class="docutils literal notranslate"><span class="pre">jgt_tools</span></code> in your package VirtualEnv,
and you’ll have access to these CLI calls:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">env-setup</span></code> - set up the development environment
with all packages and pre-commit checks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self-check</span></code> - run self-checks/linters/etc. on your repository</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run-tests</span></code> - run your in-repo test suite</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build-docs</span></code> - build repo documentation locally</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build-and-push-docs</span></code> - both build the docs,
then publish to your gh-pages branch</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check-version</span></code> - raise an error if package-relevant files have changed
without a version bump</p></li>
</ul>
<p>Details for each script can be found by calling with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> flag.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In order to keep the environment as clean as possible,
JGT Tools will only install the libraries needed to start the tool itself.
However, several of the default commands
rely on additional libraries.
When <code class="docutils literal notranslate"><span class="pre">env-setup</span></code> is run for the first time,
it will check to see if each set of commands is still default,
and if so, install the libraries those commands need.</p>
</div>
</section>
<section id="run-tests">
<h2>run-tests<a class="headerlink" href="#run-tests" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">run-tests</span></code> commands will
pass through any additional parameters
provided on the command line.
For example,
by default <code class="docutils literal notranslate"><span class="pre">run-tests</span></code> maps to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">run</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">vvv</span>
</pre></div>
</div>
<p>Running <code class="docutils literal notranslate"><span class="pre">run-tests</span> <span class="pre">-s</span></code> would run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">run</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">vvv</span> <span class="o">-</span><span class="n">s</span>
</pre></div>
</div>
</section>
<section id="documentation-index">
<h2>Documentation Index<a class="headerlink" href="#documentation-index" title="Permalink to this headline">¶</a></h2>
<p>In order to get the full benefit from <code class="docutils literal notranslate"><span class="pre">build-docs</span></code>,
it is encouraged to create an index file
that pulls together all the documentation.
This file needs to be in the root folder
and should be called <code class="docutils literal notranslate"><span class="pre">.jgt_tools.index</span></code>.
This will be moved into the working directory for Sphinx
and be used when building the documentation.
Additional information can be found on the <a class="reference external" href="http://www.sphinx-doc.org/en/master/usage/quickstart.html#defining-document-structure">Sphinx site</a>.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>A number of the actions to be called
can be customized in a <code class="docutils literal notranslate"><span class="pre">[tool.jgt_tools]</span></code>
in your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file.
Available values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">env_setup_commands</span></code> - a list of commands to be run
under the <code class="docutils literal notranslate"><span class="pre">env-setup</span></code> call</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self_check_commands</span></code> - a list of commands to be run
under the <code class="docutils literal notranslate"><span class="pre">self-check</span></code> call</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_tests_commands</span></code> - a list of commands to be run
under the <code class="docutils literal notranslate"><span class="pre">run-tests</span></code> call</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_docs_commands</span></code> - a list of commands to be run
under the <code class="docutils literal notranslate"><span class="pre">build-docs</span></code> call</p></li>
</ul>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">jgt_tools</span><span class="p">]</span>
<span class="n">env_setup_commands</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;poetry install&quot;</span><span class="p">,</span>
    <span class="s2">&quot;poetry run pip install other_package&quot;</span><span class="p">,</span>
    <span class="s2">&quot;./my_custom_setup_script.sh&quot;</span>
<span class="p">]</span>
<span class="n">build_docs_commands</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>would run your specified commands for <code class="docutils literal notranslate"><span class="pre">env-setup</span></code>
and skip the default api doc builder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>NOTE: All commands provided in <code class="docutils literal notranslate"><span class="pre">[tools.jgt_tools]</span></code>
will be run from project root.
To ensure your commands run as expected,
provide any paths in your custom commands relative from root.</p>
</div>
<section id="build-docs-commands">
<h3>build_docs_commands<a class="headerlink" href="#build-docs-commands" title="Permalink to this headline">¶</a></h3>
<p>Specifically for <code class="docutils literal notranslate"><span class="pre">build_docs_commands</span></code>,
there are some variables
that can be used to aid in documentation building,
using Python-style curly-brace formatting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BASE_DIR</span><span class="p">:</span> <span class="n">Root</span> <span class="n">library</span> <span class="n">directory</span>
<span class="n">PACKAGE_NAME</span><span class="p">:</span> <span class="n">Folder</span> <span class="n">name</span> <span class="n">containing</span> <span class="n">package</span>
<span class="n">DOCS_WORKING_DIRECTORY</span><span class="p">:</span> <span class="n">Temporary</span> <span class="n">directory</span> <span class="n">where</span> <span class="n">docs</span> <span class="n">are</span> <span class="n">built</span> <span class="p">(</span><span class="n">needed</span> <span class="k">for</span> <span class="n">Sphinx</span><span class="p">)</span>
<span class="n">DOCS_OUTPUT_DIRECTORY</span><span class="p">:</span> <span class="n">Final</span> <span class="n">directory</span> <span class="n">where</span> <span class="n">docs</span> <span class="n">are</span> <span class="n">saved</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">jgt_tools</span><span class="p">]</span>
<span class="n">build_docs_commands</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;poetry run sphinx-apidoc --output-dir </span><span class="si">{DOCS_WORKING_DIRECTORY}</span><span class="s2"> --no-toc --force --module-first </span><span class="si">{PACKAGE_NAME}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>builds the Sphinx API docs for the current package
and stores the output files
in the temporary working directory.</p>
</section>
<section id="check-version">
<h3>check-version<a class="headerlink" href="#check-version" title="Permalink to this headline">¶</a></h3>
<p>In addition,
the function to verify which files are relevant to <code class="docutils literal notranslate"><span class="pre">check-version</span></code>
can be customized.
By default, if any files in the diff against master are <code class="docutils literal notranslate"><span class="pre">.py</span></code> files,
a version bump is expected,
but the user can provide an alternate function to verify filenames.</p>
<p>The function should expect a list of strings
representing file paths relative from project root
(as provided by <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">master</span> <span class="pre">--name-only</span></code>)
and return a boolean representing if a version change should be ensured
(i.e. <code class="docutils literal notranslate"><span class="pre">True</span></code> if version should be checked).</p>
<p>This can be registered as a plugin in your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">tools</span><span class="o">.</span><span class="n">poetry</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="s2">&quot;file_checkers&quot;</span><span class="p">]</span>
<span class="s2">&quot;version_trigger&quot;</span> <span class="o">=</span> <span class="s2">&quot;my_module:my_function&quot;</span>
</pre></div>
</div>
<p>or in your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;version_trigger&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;version_trigger = my_module:my_fuction&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Brad Brown.
      <span class="build">Build<a href="https://github.com//github/tree/2e68648bf21d4a2f8f67b15a33b131073803ed8d">2e68648bf21d4a2f8f67b15a33b131073803ed8d</a>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>